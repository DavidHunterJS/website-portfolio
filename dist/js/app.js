var express=require("express"),app=express(),bodyParser=require("body-parser"),email=require("emailjs"),creds=require("./creds.js").creds;app.use(function(e,r,s){r.header("Access-Control-Allow-Origin",creds.urlDev),r.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s()}),app.use(bodyParser.urlencoded({extended:!0})),app.post("/myAction",function(e,r){var s={text:e.body.message+e.body.email,from:e.body.name,to:creds.toEmail,cc:"",subject:e.body.subject},o=email.message.create(s);server.send(o,function(e,r){console.log(e||r)}),r.end()});var server=email.server.connect({user:creds.usr,password:creds.pwd,host:"smtp.gmail.com",ssl:!0});app.listen(8181,function(){console.log("Server running at http://127.0.0.1:8181/")});